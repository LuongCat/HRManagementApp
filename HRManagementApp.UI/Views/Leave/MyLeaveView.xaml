<UserControl x:Class="HRManagementApp.UI.Views.Leave.MyLeaveView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:converters="clr-namespace:HRManagementApp.Converters"
             Background="#F5F7FA">

    <UserControl.Resources>
        <converters:LeaveStatusBackgroundConverter x:Key="BgConverter"/>
        <converters:LeaveStatusForegroundConverter x:Key="FgConverter"/>
    </UserControl.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,20">
            <StackPanel>
                <TextBlock Text="ÄÆ¡n nghá»‰ cá»§a tÃ´i" FontSize="20" FontWeight="Bold" Foreground="#1F2937"/>
                <TextBlock Text="Lá»‹ch sá»­ nghá»‰ phÃ©p vÃ  tráº¡ng thÃ¡i phÃª duyá»‡t" FontSize="14" Foreground="#6B7280" Margin="0,5,0,0"/>
            </StackPanel>
            
            <Button Content="+ Viáº¿t Ä‘Æ¡n xin nghá»‰" HorizontalAlignment="Right" VerticalAlignment="Center"
                    Background="#2563EB" Foreground="White" FontWeight="SemiBold"
                    Padding="20,10" BorderThickness="0" Cursor="Hand"
                    Click="BtnCreateRequest_Click">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="8"/>
                    </Style>
                </Button.Resources>
            </Button>
        </Grid>

        <Border Grid.Row="1" Background="White" CornerRadius="12" Padding="20">
            <Border.Effect>
                <DropShadowEffect Color="#E0E0E0" BlurRadius="10" ShadowDepth="2" Opacity="0.3"/>
            </Border.Effect>

            <DataGrid x:Name="DgMyRequests" AutoGenerateColumns="False"
                      IsReadOnly="True" CanUserAddRows="False"
                      GridLinesVisibility="Horizontal" HeadersVisibility="Column"
                      Background="White" BorderThickness="0" RowHeight="55"
                      HorizontalGridLinesBrush="#F3F4F6">
                
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Foreground" Value="#111827"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="Padding" Value="10,0"/>
                        <Setter Property="Height" Value="40"/>
                        <Setter Property="BorderThickness" Value="0,0,0,1"/>
                        <Setter Property="BorderBrush" Value="#E5E7EB"/>
                    </Style>
                    <Style TargetType="DataGridCell">
                        <Setter Property="Padding" Value="10,0"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="DataGridCell">
                                    <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                                        <ContentPresenter VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="MÃ£ Ä‘Æ¡n" Binding="{Binding MaDonDisplay}" Width="80" FontWeight="Medium"/>
                    <DataGridTemplateColumn Header="Loáº¡i Ä‘Æ¡n" Width="150">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="ðŸ“…" Margin="0,0,8,0" Foreground="#6B7280"/>
                                    <TextBlock Text="{Binding TenLoaiDon}"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn Header="Tá»« ngÃ y" Binding="{Binding NgayBatDau, StringFormat=dd/MM/yyyy}" Width="120"/>
                    <DataGridTextColumn Header="Äáº¿n ngÃ y" Binding="{Binding NgayKetThuc, StringFormat=dd/MM/yyyy}" Width="120"/>
                    <DataGridTextColumn Header="Sá»‘ ngÃ y" Binding="{Binding SoNgayDisplay}" Width="100"/>
                    <DataGridTextColumn Header="LÃ½ do" Binding="{Binding LyDo}" Width="*"/>
                    <DataGridTextColumn Header="NgÃ y gá»­i" Binding="{Binding NgayGui, StringFormat=dd/MM/yyyy}" Width="120" Foreground="#6B7280"/>

                    <DataGridTemplateColumn Header="Tráº¡ng thÃ¡i" Width="140">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Border Background="{Binding TrangThai, Converter={StaticResource BgConverter}}"
                                        CornerRadius="12" Padding="12,4" HorizontalAlignment="Left">
                                    <TextBlock Text="{Binding TrangThai}" FontSize="12" FontWeight="Bold"
                                               Foreground="{Binding TrangThai, Converter={StaticResource FgConverter}}" 
                                               HorizontalAlignment="Center"/>
                                </Border>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>