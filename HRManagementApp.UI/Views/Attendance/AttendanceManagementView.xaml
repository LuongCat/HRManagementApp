<UserControl x:Class="HRManagementApp.UI.Views.AttendanceManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#F5F7FA">
    
    <Grid Margin="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <RowDefinition Height="*"/>    </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,0,0,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                    
                    <TextBlock Text="Mã NV:" VerticalAlignment="Center" Margin="15,0,5,0"/>
                    <TextBox x:Name="txtSearchMaNV" Width="120" Height="35" 
                             VerticalContentAlignment="Center" Padding="5" />
                    
                    <TextBlock Text="Tháng:" VerticalAlignment="Center" Margin="15,0,5,0"/>
                    <TextBox x:Name="txtMonth" Width="50" Height="35" VerticalContentAlignment="Center" HorizontalContentAlignment="Center"/>
                    
                    <TextBlock Text="Năm:" VerticalAlignment="Center" Margin="10,0,5,0"/>
                    <TextBox x:Name="txtYear" Width="60" Height="35" VerticalContentAlignment="Center" HorizontalContentAlignment="Center"/>

                    <Button Content="Tìm kiếm" Click="LoadData_Click" Margin="15,0,0,0"
                            Background="#374151" Foreground="White" Width="90" Height="35" BorderThickness="0">
                        <Button.Resources>
                            <Style TargetType="Border"><Setter Property="CornerRadius" Value="4"/></Style>
                        </Button.Resources>
                    </Button>
                </StackPanel>
            </StackPanel>

            <Button Grid.Column="1" Content="+ Thêm thủ công" Click="Add_Click"
                    Background="#2563EB" Foreground="White" Width="140" Height="40" 
                    BorderThickness="0" FontWeight="SemiBold" VerticalAlignment="Top">
                <Button.Resources>
                    <Style TargetType="Border"><Setter Property="CornerRadius" Value="6"/></Style>
                </Button.Resources>
            </Button>
        </Grid>

        <Border Grid.Row="1" Background="White" CornerRadius="10" Padding="10">
            <DataGrid x:Name="dgAttendance" AutoGenerateColumns="False" 
                      IsReadOnly="True" CanUserAddRows="False"
                      GridLinesVisibility="None" HeadersVisibility="Column"
                      RowHeight="45" BorderThickness="0" Background="White">
                
                <DataGrid.Resources>
                    <Style TargetType="DataGridColumnHeader">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="Height" Value="40"/>
                        <Setter Property="FontWeight" Value="SemiBold"/>
                       
                        <Setter Property="BorderBrush" Value="#E5E7EB"/>
                    </Style>
                </DataGrid.Resources>

                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding MaCC}" Width="50" Visibility="Hidden"/>
                    <DataGridTextColumn Header="Mã NV" Binding="{Binding MaNV}" Width="80" FontWeight="Bold"/>
                    <DataGridTextColumn Header="Ngày" Binding="{Binding Ngay, StringFormat=dd/MM/yyyy}" Width="120"/>
                    
                    <DataGridTextColumn Header="Giờ Vào" Binding="{Binding GioVao, StringFormat=hh\\:mm}" Width="100"/>
                    <DataGridTextColumn Header="Giờ Ra" Binding="{Binding GioRa, StringFormat=hh\\:mm}" Width="100"/>
                    
                    <DataGridTemplateColumn Header="Thời gian làm" Width="120">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding ThoiGianLam.TotalHours, StringFormat=N2}" VerticalAlignment="Center" FontWeight="SemiBold" Foreground="#059669"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="Thao tác" Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <Button Content="Sửa" Click="Edit_Click"
                                            Background="#EFF6FF" Foreground="#2563EB" BorderThickness="0"
                                            Padding="10,5" Margin="0,0,5,0" Cursor="Hand">
                                        <Button.Resources>
                                            <Style TargetType="Border"><Setter Property="CornerRadius" Value="4"/></Style>
                                        </Button.Resources>
                                    </Button>

                                    <Button Content="Xóa" Click="Delete_Click"
                                            Background="#FEF2F2" Foreground="#DC2626" BorderThickness="0"
                                            Padding="10,5" Cursor="Hand">
                                        <Button.Resources>
                                            <Style TargetType="Border"><Setter Property="CornerRadius" Value="4"/></Style>
                                        </Button.Resources>
                                    </Button>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>